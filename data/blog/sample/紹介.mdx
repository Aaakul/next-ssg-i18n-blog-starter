---
title: 'Next SSG i18n Blog Starter v0.2 のご紹介'
summary: 'この記事では、すぐに使える、静的サイト生成と多言語対応に対応したNext.jsブログテンプレート Next SSG i18n Blog Starter を紹介します。'
translationKey: 'intro'
date: '2025-11-11T15:45:00+08:00'
tags: ['next', 'コーディング', 'ガイド']
language: 'ja'
authors: ['default', 'test']
---

> [!NOTE]
> この文章はAIによって翻訳されました

## 動機

Next.js の**静的サイト生成 (SSG)** 機能に興味を持って、人気の [**Tailwind Next.js Starter Blog**](https://github.com/timlrx/tailwind-nextjs-starter-blog) を基に個人ブログを作成し始めました。しかし、**国際化 (i18n)** を統合する過程で、i18n と SSG の間で多くの問題に直面しました。

いくつかの解決策を試した結果、最終的に [**next-intl**](https://next-intl.dev/) を用いて安定かつ効率的な i18n サポートを実現し、このプロジェクトの作成に至りました。本テンプレートは、プログラミング経験が少ない方でも**簡単に多言語対応ブログ**を設定できる設計です。また、SSG と i18n の共存についての参考となることも目指しています。

---

## 機能

本テンプレートは Tailwind Next.js Starter Blog の[主要機能](https://github.com/timlrx/tailwind-nextjs-starter-blog#features)を引き継ぎつつ、i18n を統合し、開発体験をさらに向上させています。主な特長は以下の通りです:

- **優れたユーザー体験**: Lighthouse スコアがほぼ満点。
- **すぐに使える国際化**: [next-intl](https://next-intl.dev/) を統合し、SSG に対応。
  - ユーザーのブラウザ言語設定を自動検出します。
  - Cookie によりユーザーの言語設定を保存（有効期限設定が可能で、GDPR などの規制対応が容易。デフォルトはセッション Cookie）
  - 日本語、英語、簡体字中国語の翻訳を内蔵。
- **国際化 SEO 最適化**:
  - `<link rel="alternate" hreflang="...">` タグや `Metadata`、`Open Graph` タグを自動生成します。
  - [next-sitemap](https://github.com/iamvishnusankar/next-sitemap) を使用し、ビルド時に多言語対応の `sitemap` と `robots.txt` を生成します。
- **多言語対応 RSS / Atom フィード**: [feed](https://github.com/jpmonette/feed) を使用し、ビルド時に言語ごとの静的フィードファイルを生成します。
- **モダンなスタイルシステム**: [**Tailwind CSS v4.1**](https://tailwindcss.com/) を採用し、簡単にカスタマイズ可能。
- **設定不要のサイト内検索**: [`pliny/search`](https://github.com/timlrx/pliny/tree/main/packages/pliny/src/search) をカスタマイズし、[`KBar`](https://github.com/timc1/kbar) で動作します。
- **モダンな Markdown 執筆体験**:
  - [MDX](https://mdxjs.com/) をサポートし、Markdown 内で JSX/React コンポーネントを直接埋め込み可能。
  - [contentlayer2](https://github.com/timlrx/contentlayer2) を使って Markdown/MDX ファイルを処理。
  - コードハイライトは [`rehype-pretty-code`](https://rehype-pretty.pages.dev) を利用し、行番号とハイライト機能を提供。コードコピー機能は [`pliny/ui/Pre`](https://github.com/timlrx/pliny/blob/main/packages/pliny/src/ui/Pre.tsx) をベースにカスタマイズ。
  - 数学式は [KaTeX](https://katex.org/) を使用してレンダリング。
  - [GitHub 風のアラートボックス](https://docs.github.com/en/get-started/writing-on-github/getting-started-with-writing-and-formatting-on-github/basic-writing-and-formatting-syntax#alerts) を [remark-github-blockquote-alert](https://github.com/jaywcjlove/remark-github-blockquote-alert) により実現。

---

## クイックスタート

1. **リポジトリをクローン**

   ```bash
   git clone https://github.com/Aaakul/next-ssg-i18n-blog-starter.git
   ```

2. **依存関係をインストール**

   ```bash
   cd next-ssg-i18n-blog-starter
   npm install
   ```

3. **サイト情報を設定**
   `./data/SiteConfig.mjs` を編集し、基本的なサイト情報やソーシャルメディアリンクを設定します。

4. **コンテンツのローカライズ**
   `./i18n/messages/*.json` の以下のフィールドを更新します:
   - `header_title`: ナビゲーションバーのタイトル
   - `site_title`: サイトのタイトル
   - `site_description`: サイトの説明

5. **アイコンとアバターを更新**
   以下のファイルを更新します:
   - サイトアイコン: `./app/favicon.ico`、`./app/apple-touch.png`、`./public/favicon.svg`
   - デフォルトのアバター: `./public/static/images/avatar.svg`
   - Open Graph と Twitter カード画像: `./public/static/images/twitter-card.png`

6. **プロジェクトページをカスタマイズ**
   `./data/projectsData.ts` を編集し、プロジェクトの紹介を更新します。

7. **作者情報を設定**
   該当する言語の `./data/authors/.../default.md` を編集します（「Markdown / MDX - 作者ページ」セクションを参照）。

8. **ブログ記事を追加**
   `./data/blog/` ディレクトリに Markdown ファイルを新規作成します（「Markdown / MDX - 記事」セクションを参照）。

---

## 開発

Turbopack を使用して開発サーバーを起動します:

```bash
npm run dev
```

> [!NOTE]
> Markdown ファイルや Contentlayer の設定ファイルを編集して、**リアルタイムのホットリロード**を反映させたい場合は、Webpack モードを使用してください:

```bash
npm run dev:webpack
```

> [!TIP]
> Contentlayer のコンテンツを手動でビルドする場合:

```bash
npm run contentlayer
```

---

## カスタマイズ

### 国際化

このプロジェクトには、簡体字中国語 (`zh`)、英語 (`en`)、日本語 (`ja`) の翻訳が内蔵されています。翻訳ファイルは `./i18n/messages/` にあります。既存の翻訳を改善したり、新しい言語を追加したりできます。

### その他のカスタマイズ設定

- **スタイルのカスタマイズ**  
  `tailwind.config.js` や `styles/*.css` を使用して Tailwind の設定や CSS スタイルを調整することで、全体的な見た目を簡単に変更できます。

- **MDX コンポーネント**  
  `components/MDXComponents.tsx` にカスタム React コンポーネントを登録することで、`.mdx` または `.md` ファイル内で使用可能になります。
  **注意: Next.js の** [**既知の問題**](https://github.com/vercel/next.js/issues/51593)を避けるため、コンポーネントは**デフォルトエクスポート**を使用してください。

- **ナビゲーションバー**  
  `./components/Header.tsx` を編集して、ヘッダーのナビゲーションリンクをカスタマイズします。

- **記事レイアウト**  
  記事ページには以下の3つのレイアウトがサポートされています（`./layouts/` にあります）:
  - `PostLayout`(デフォルト): サイドバーに目次 (TOC) を表示する2カラムレイアウト。
  - `PostSimple`: `PostLayout` の簡易版（サイドバー TOC なし）。
  - `PostBanner`: ヘッダー部分にバナー画像を表示するレイアウト（サイドバー TOC なし）。[サンプルページを見る](/ja/blog/sample/MDX%25E3%2581%25AE%25E4%25BE%258B)

  使用するレイアウトは、記事の Frontmatter で `layout` フィールドを指定して選択できます。

---

## Markdown / MDX

このプロジェクトでは [Contentlayer](https://www.contentlayer.dev/docs/getting-started) を使用して `.md` および `.mdx` ファイルを処理しています。

### Frontmatter

Frontmatter は [Hugo の標準フォーマット](https://gohugo.io/content-management/front-matter/) に準拠しています。具体的なフィールドの定義は `./contentlayer.config.ts` を参照してください。

#### 作者ページ (`./data/authors/**/*.mdx`)

**必須フィールド:**

```ts
name: string
language: string // `SiteConfig` の言語設定と一致させる必要があります
```

**任意フィールド:**

```ts
occupation: string
company: string
mail: string
twitter: string
bluesky: string
linkedin: string
github: string
```

#### 記事 (`./data/blog/**/*.mdx`)

**必須フィールド:**

```ts
title: string
date: string // 例: '2025-01-01T16:35:00+08:00'
translationKey: string // 多言語記事を関連付けるためのキー
language: string // `SiteConfig` の言語設定と一致させる必要があります
```

**任意フィールド:**

```ts
tags: string[]
lastmod: string            // 最終更新日
draft: boolean             // true の場合、記事はビルドされません
summary: string            // 記事の要約
images: string[]           // Open Graph などメタタグ用の画像 URL リスト
authors: string[]          // `./data/authors/` 以下のファイル名。指定がない場合は ['default']
layout: string             // ページレイアウト。指定がない場合は 'PostLayout'
isCanonical: boolean       // true の場合、<link rel="alternate" hreflang="x-default" ...> タグが追加されます。デフォルトは false
```

---

**例: 全ての Frontmatter フィールドを含む記事**

```mdx
---
title: 'Introducing'
translationKey: 'intro'
date: '2025-01-01'
lastmod: '2025-11-11'
tags: ['next-js', 'tailwind', 'guide']
draft: false
language: 'en'
summary: 'In this article...'
images: ['/static/images/img1.jpg', '/static/images/img2.jpg']
authors: ['default', 'test']
layout: PostLayout
isCanonical: true
---

# H1 タイトル

コンテンツ...

{/* 組み込み目次コンポーネント */}

<TOCInline toc={props.toc} exclude="section to be excluded" toHeading={2} />
```

> [!IMPORTANT]
> **`translationKey`** は多言語の記事を**関連付けるための重要なフィールド**です。同じ内容の記事であれば、言語が異なっても**同じ値**を使用してください。

---

## デプロイ

本プロジェクトは SSG に特化して設計されており、GitHub Pages、Cloudflare Pages、AWS S3、Firebase Hosting など、あらゆる静的ホスティングプラットフォームに簡単にデプロイできます。

### 手動デプロイ

- **より小さいビルドサイズ**  
  Webpack を使用してビルド:

  ```sh
  npm run export
  ```

- **より高速なビルド**  
  Turbopack を使用してビルド:

  ```sh
  npm run export:turbo
  ```

ビルド後、生成された `out` ディレクトリを静的ホスティングサービスにアップロードしてください。

### デプロイ結果のローカルプレビュー

ビルド後、以下のコマンドでサイトをローカルでプレビューできます:

```sh
npx serve out
```

その後、ターミナルに表示される URL（デフォルト: [http://localhost:3000](http://localhost:3000)）をブラウザで開いてください。
**`basePath`（例えば '/blog'）を設定した場合、`./out` 内のファイルを `./out/blog` にコピーする必要があります**

### GitHub Pages の自動デプロイ

今後、`.github/workflows/pages.yml` の設定ファイルを提供する予定です。これを有効化すると、GitHub Pages への自動ビルドおよびデプロイが行われます。

### Cloudflare Pages の自動デプロイ

1.  **このリポジトリを Fork** します。
2.  [Cloudflare ダッシュボード](https://dash.cloudflare.com) にログインし、**Workers と Pages** を開きます。
3.  **アプリケーションを作成 → Pages → 既存の Git リポジトリをインポート** をクリックし、GitHub アカウントを Cloudflare にリンクして、Fork したリポジトリを選択します。
4.  ビルド設定を以下のように行います:
    - **フレームワークプリセット**: `Next.js (Static HTML Export)`
    - **ビルドコマンド**: `npm run export`
    - **ビルド出力ディレクトリ**: `out`
5.  **保存してデプロイ** をクリックすると、Cloudflare は初回のビルドとデプロイを自動的に完了します。

以降、コードをプッシュするたびに Cloudflare Pages が自動的に新しいビルドをトリガーします。

---

## FAQ

### `basePath` の設定

子パス（例: `https://example.com/blog/`）にデプロイする場合は、`./data/SiteConfig.mjs` 内の `basePath` フィールドを設定してください。

### `kbar` コマンドパレットのカスタマイズ

- [kbar を使った Command Palette の追加 - Modern Next.js Blog シリーズ \#26（繁体字中国語ページ）](https://easonchang.com/zh-TW/posts/kbar-command-palette)
- [How can I customize the `kbar` search?](https://github.com/timlrx/tailwind-nextjs-starter-blog/blob/main/faq/customize-kbar-search.md)

### MDX コンポーネントのカスタマイズ

- [How can I add a custom MDX component?](https://github.com/timlrx/tailwind-nextjs-starter-blog/blob/main/faq/custom-mdx-component.md)

---

## 開発計画

今後のバージョンで以下の機能を段階的に追加する予定です（順不同）:

- **元のテンプレートから削除された機能**: コメントシステム、サイト分析機能、引用および参考文献のサポート
- **新しい便利機能**: 記事の下部に著作権表示コンポーネントを追加

---

## 謝辞

本プロジェクトは [`Tailwind Next.js Starter Blog`](https://github.com/timlrx/tailwind-nextjs-starter-blog) と [`Pliny`](https://github.com/timlrx/pliny) を基に開発されています。
高品質なブログテンプレートとツールライブラリをコミュニティに提供してくださった **[Timothy Lin (timlrx)](https://github.com/timlrx)** に深く感謝いたします。

---

## ライセンス

本プロジェクトは MIT ライセンスを採用しています。
